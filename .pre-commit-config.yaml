repos:
- repo: local
  hooks:
    - id: ufmt
      name: ufmt
      entry: ufmt format
      language: python
      require_serial: true

    - id: flake8
      name: flake8
      entry: flake8
      language: python
      language_version: python3
      types: [python]
      # only in xopt
      files: ^xopt
      args: # arguments to configure flake8
        # making isort line length compatible with black
        - "--max-line-length=88"

    - id: pytest
      name: pytest
      stages: [commit]
      language: system
      entry: pytest
      types: [python]
      pass_filenames: false

    - id: pytest-cov
      name: pytest
      stages: [push]
      language: system
      entry: pytest --cov --cov-fail-under=70
      types: [python]
      pass_filenames: false
