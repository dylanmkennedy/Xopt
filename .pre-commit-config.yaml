repos:
- repo: local
  hooks:
    - id: ufmt
      name: ufmt
      entry: ufmt
      language: python
      repo: https://github.com/omnilib/ufmt
      additional_dependencies:
        - black == 21.12b0
        - usort == 1.0.1

    - id: flake8
      name: flake8
      entry: flake8
      language: python
      language_version: python3
      types: [python]
      # only in lume_services
      files: ^lume_services
      args: # arguments to configure flake8
        # making isort line length compatible with black
        - "--max-line-length=88"

    - id: pytest
      name: pytest
      stages: [commit]
      language: system
      entry: pytest
      types: [python]

    - id: pytest-cov
      name: pytest
      stages: [push]
      language: system
      entry: pytest --cov --cov-fail-under=70
      types: [python]
      pass_filenames: false
